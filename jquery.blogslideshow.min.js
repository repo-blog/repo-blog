(function(a){a.aQueue=function(){var e=0,d=null,b={},f=[];var c=function(i,h){if(typeof i=="string"){i=h[i]}var g=function(){i.apply(h,arguments)};return g};return{add:function(g){f.push(g);return this},run:function(){if(f.length){var g=f.shift();b=g;if(undefined!==g.startedCallback){g.startedCallback.apply(g.scope,[])}if(undefined===g.iterations){return}e=0;if(undefined!==g.reverse&&true===g.reverse){e=g.iterations+1;this.deiterate()}else{this.iterate()}}},iterate:function(){if(++e<=b.iterations){b.iteratedCallback.apply(b.scope,[e,b.iterations]);d=setTimeout(c(this.iterate,this),b.delay)}else{b.completedCallback.apply(b.scope,[]);d=null;this.run()}},deiterate:function(){if(--e>=1){b.iteratedCallback.apply(b.scope,[e,b.iterations]);d=setTimeout(c(this.deiterate,this),b.delay)}else{b.completedCallback.apply(b.scope,[]);d=null;this.run()}},stop:function(){d=null;e=b.reverse?0:b.iterations+1;f=[]}}}()})(jQuery);(function(f){var h="next",b="prev",g="vertical",c="horizontal",a="default",d=37,e=39;Util={ucfirst:function(i){i+="";return i.charAt(0).toUpperCase()+(i.substr(1).toLowerCase())},isPropertySupported:function(j){var i=Util.ucfirst(j);return(("Webkit"+i) in document.body.style||("Moz"+i) in document.body.style||("O"+i) in document.body.style||("Ms"+i) in document.body.style||j in document.body.style)}};f.fn.css3=function(l,k){var j={},i=typeof l==="object"?l:(function(){var m={};m[l]=k;return m}());f.each(i,function(n,m){j[n]=j["-moz-"+n]=j["-ms-"+n]=j["-o-"+n]=j["-webkit-"+n]=m});return f(this).css(j)};f.fn.tEffects=function(i){i.boundingBox=f(this);return f.tEffects(i)};f.tEffects=function(j){var i={pressKey:function(k){if(k.which===d){i.goPrev(k)}if(k.which===e){i.goNext(k)}},goNext:function(l){l.preventDefault();if(f(this).hasClass("te-trigger-inactive")){return false}var k=l.data;k.invoke.apply(_implementor,[k.index+1]);k.index++;k.updateTriggersState()},goPrev:function(l){l.preventDefault();if(f(this).hasClass("te-trigger-inactive")){return false}var k=l.data;k.invoke.apply(_implementor,[k.index-1]);k.index--;k.updateTriggersState()},goChosen:function(m){var l=m.data,k=f(this).data("index");m.preventDefault();if(f(this).hasClass("te-trigger-inactive")){return false}l.invoke.apply(_implementor,[k]);l.index=k;l.updateTriggersState()}};_implementor=null,_manager=new function(){return{node:{boundingBox:j.boundingBox,overlay:null,slider:null,images:[],ceils:[],controls:[]},index:0,canvas:{width:0,height:0},ceil:{width:0,height:0},listLength:0,duration:1,delay:50,cols:10,rows:10,direction:g,settings:{effect:null,triggerNext:function(){},triggerPrev:function(){},transitionDuration:1,transitionDelay:50,cols:10,rows:10,initalIndex:0,dimension:10,method:a,controls:{template:null,appendTo:null},images:[]},init:function(){this.setup(j);this.node.images=this.settings.images.length?this.settings.images:this.node.boundingBox.find("img");this.node.boundingBox.addClass("te-boundingBox");this.checkEntryConditions();this.updateTriggersState();this.render(function(){_implementor=new f.tEffects[j.effect](this);_implementor.init()})},setup:function(k){f.extend(this.settings,k);this.index=this.settings.initalIndex},checkEntryConditions:function(){if(!this.node.images.length){throw"No images found"}if(typeof f.tEffects[j.effect]==="undefined"){j.effect="Default"}},render:function(m){var k=this,l=function(n){f(this).data("state","loaded");k.canvas={width:f(this).width(),height:f(this).height()};k.node.boundingBox.css({width:k.canvas.width,height:k.canvas.height});if(k.settings.controls.template!==null){k.renderControls()}k.node.images.css({visibility:"visible"});k.node.boundingBox.html("");if(_implementor===null){m.apply(k,arguments)}};if(f(this.node.images[this.index]).data("state")==="loaded"){l.call(f(this.node.images[this.index]))}else{f(this.node.images[this.index]).attr("src",function(n,o){return o+"?v="+(new Date()).getTime()}).bind("load",this,l)}},isset:function(k){return(typeof k!=="undefined")},updateTriggersState:function(){if(this.isset(j.triggerNext)){f(j.triggerNext.node)[(this.getImage(h).length?"removeClass":"addClass")]("te-trigger-inactive")}if(this.isset(j.triggerPrev)){f(j.triggerPrev.node)[(this.getImage(b).length?"removeClass":"addClass")]("te-trigger-inactive")}if(this.node.controls.length){f.each(this.node.controls,function(){f(this).removeClass("te-trigger-inactive")});f(this.node.controls[this.index]).addClass("te-trigger-inactive")}},invoke:function(k){var l="update"+(Util.isPropertySupported("transition")?"":"Fallback");if(typeof this[l]!=="undefined"){f(document).trigger("start-transition.t-effect",[k]);this[l](k,function(){f(document).trigger("end-transition.t-effect",[k])})}},enable:function(){f(document).bind("keydown",this,i.pressKey);if(typeof j.triggerNext!=="undefined"){f(j.triggerNext.node).bind(j.triggerNext.event,this,i.goNext)}if(typeof j.triggerPrev!=="undefined"){f(j.triggerPrev.node).bind(j.triggerPrev.event,this,i.goPrev)}},disable:function(){f(document).unbind("keydown",this,i.pressKey);if(typeof j.triggerNext!=="undefined"){f(j.triggerNext.node).unbind(j.triggerNext.event,i.goNext)}if(typeof j.triggerPrev!=="undefined"){f(j.triggerPrev.node).unbind(j.triggerPrev.event,i.goPrev)}},getImage:function(k){if(typeof k==="string"){switch(k){case"next":return f(this.node.images[this.index+1]);case"prev":return f(this.node.images[this.index-1]);break;default:throw"Insufficient key"}}return f(this.node.images[typeof k!=="undefined"?k:this.index])},getLinearGridCellSize:function(){var k=this.settings.direction;return{width:k===c?this.canvas.width:Math.ceil(this.canvas.width/this.settings.cols),height:k===c?Math.ceil(this.canvas.height/this.settings.rows):this.canvas.height}},getLinearGrid:function(){var m='<div class="te-grid">';for(var l=0,k=(this.settings.direction===c?this.settings.rows:this.settings.cols);l<k;l++){m+='<div class="te-'+(l%2?"even":"odd")+'"><!-- --></div>'}return m+"</div>"},getCrossedGrid:function(){var m='<div class="te-grid">';for(var l=0,k=(this.settings.dimension*this.settings.dimension);l<k;l++){m+="<div><!-- --></div>"}return m+"</div>"},renderOverlay:function(n){var m=typeof n!=="string"?"<!-- -->":this["get"+n],k=this.settings.direction===c?"horizontal":"vertical",l=(n in {LinearGrid:1,CrossedGrid:1}?" te-"+k+"-grid":"");return f('<div class="te-overlay'+l+'">'+(typeof m==="string"?m:m.call(this))+"</div>").appendTo(this.node.boundingBox)},renderControls:function(){for(var l=0,k=this.node.images.length;l<k;l++){this.node.controls[l]=f(this.settings.controls.template).appendTo(this.settings.controls.appendTo);f(this.node.controls[this.index]).addClass("te-trigger-inactive");this.node.controls[l].data("index",l).bind("click.t-effect",this,i.goChosen)}},attachImageTo:function(m,k){var l=typeof m==="string"?this.node[m]:m;l.css("backgroundImage","url("+this.getImage(k).attr("src")+")");return this}}};_manager.init();return _manager};f.tEffects.Default=function(j){var i=j;return{init:function(){i.attachImageTo("boundingBox")},update:function(k,l){i.attachImageTo("boundingBox",k);l()},updateFallback:function(k,l){i.attachImageTo("boundingBox",k);l()}}};f.tEffects.FadeInOut=function(k){var j=k,i;return{init:function(){j.attachImageTo("boundingBox");i=j.renderOverlay();if(Util.isPropertySupported("transform")){i.addClass("te-transition").css3({"transition-duration":k.settings.transitionDuration+"s","transition-property":"opacity",opacity:"0"})}},update:function(m,n){var l=i.css("opacity");if(l==="0"){j.attachImageTo(i,m)}else{j.attachImageTo("boundingBox",m)}i.css3("opacity",(l==="0")?"1.0":"0");window.setTimeout(n,k.settings.transitionDuration*1000)},updateFallback:function(l,m){i.hide().css("backgroundImage","url("+j.getImage(l).attr("src")+")").fadeIn("slow",function(){j.attachImageTo(i,l);m()})}}};f.tEffects.Deck=function(m){var k=m,l=k.settings.direction,j,i=false;return{init:function(){k.attachImageTo("boundingBox");j=k.renderOverlay();j.addClass("te-transition").css3({"transition-duration":m.settings.transitionDuration+"s"})},update:function(n,o){k.attachImageTo("boundingBox",(!i?n:undefined)).attachImageTo(j,(i?n:undefined));j.css3({transform:"translate"+(l===c?"X":"Y")+"("+(i?"0%":"100%")+")"});i=!i;window.setTimeout(o,k.settings.transitionDuration*1000)},updateFallback:function(n,p){var o=10;f.aQueue.add({startedCallback:function(){j.css("visibility","visible");k.attachImageTo("boundingBox",(!i?n:undefined)).attachImageTo(j,(i?n:undefined))},iteratedCallback:function(s){var t=Math.ceil(k.canvas.width/o*s),r=Math.ceil(k.canvas.height/o*s),q,u;switch(l){case c:q=i?k.canvas.width-t:t;u=0;break;default:u=i?k.canvas.height-r:r;q=0;break}j.css({backgroundPosition:q+"px "+u+"px"});if(j.css("visibility")!=="visible"){j.css("visibility","visible")}},completedCallback:function(){i=!i;p()},iterations:o,delay:k.settings.transitionDelay,scope:this}).run()}}};f.tEffects.Scroll=function(k){var i=k,l=[],j=i.settings.direction,m;return{init:function(){l=i.getLinearGridCellSize();i.attachImageTo("boundingBox");m=f('<div class="te-slider te-transition"><!-- --></div>').appendTo(i.node.boundingBox);m.append(i.node.images.clone()).css("width",i.canvas.width*i.node.images.length).find("img").css({display:(j===c?"inline":"block"),visibility:"visible"})},update:function(n,o){m.css3("transform","translate"+(j===c?"X":"Y")+"(-"+(n*(j===c?i.canvas.width:i.canvas.height))+"px)");window.setTimeout(o,i.settings.transitionDuration*1000)},updateFallback:function(q,s){var p=i.index*i.canvas.width,o=(q*i.canvas.width-p),n=i.index*i.canvas.height,r=(q*i.canvas.height-n);f.aQueue.add({startedCallback:function(){},iteratedCallback:function(t){if(j===c){i.node.boundingBox.scrollLeft(p+Math.ceil(o/10*t))}else{i.node.boundingBox.scrollTop(n+Math.ceil(r/10*t))}},completedCallback:s,iterations:(j===c?i.settings.rows:i.settings.cols),delay:i.settings.transitionDelay,scope:this}).run()}}};f.tEffects.Ladder=function(m){var k=m,o,n,l=k.settings.direction,j,i=false;return{init:function(){o=k.getLinearGridCellSize();k.attachImageTo("boundingBox");j=k.renderOverlay("LinearGrid");n=j.find("div.te-grid > div");j.find("div.te-grid").css({width:o.width*k.settings.cols,display:"block"});var p="render"+(Util.isPropertySupported("transform")?"":"Fallback");this[p]()},render:function(){var q=0,p=0;n.css({width:l===c?0:o.width,height:l===c?o.height:0}).addClass("te-transition").css3("transition-duration",k.settings.transitionDuration+"s").each(function(){f(this).css({backgroundImage:"url("+k.getImage().attr("src")+")",backgroundPosition:(l===c?("0px "+q+"px"):(q+"px 0px")),backgroundRepeat:"no-repeat"}).css3("transition-delay",p+"ms");p+=k.settings.transitionDelay;q-=(l===c?o.height:o.width)})},renderFallback:function(){n.css({width:o.width,height:o.height})},update:function(p,q){k.attachImageTo("boundingBox",(i?p:undefined)).attachImageTo(n,(!i?p:undefined));if(l===c){n.css("width",(i?"1px":k.canvas.width))}else{n.css("height",(i?"1px":k.canvas.height))}i=!i;window.setTimeout(q,k.settings.transitionDuration*1000)},updateFallback:function(p,q){f.aQueue.add({startedCallback:function(){var r=0;k.attachImageTo("boundingBox",!i?undefined:p);n.each(function(){f(this).css({backgroundImage:"url("+k.getImage(i?undefined:p).attr("src")+")",backgroundPosition:(l===c?("0px "+r+"px"):(r+"px 0px")),backgroundRepeat:"no-repeat"});r-=(l===c?o.height:o.width)});n.css(l===c?{width:i?o.width:0}:{height:i?o.height:0})},iteratedCallback:function(s){var t,r=l===c?Math.ceil(k.canvas.width/k.settings.rows):Math.ceil(k.canvas.height/k.settings.cols);n.each(function(u){t=(r*s)-(u*r);if(l===c){f(this).css("width",i?((k.canvas.width-t>0)?k.canvas.width-t:0):(t>k.canvas.width?k.canvas.width:t))}else{f(this).css("height",i?((k.canvas.height-t>0)?k.canvas.height-t:0):(t>k.canvas.height?k.canvas.height:t))}})},completedCallback:function(){i=!i;q()},iterations:(l===c?k.settings.rows:k.settings.cols)*2,delay:k.settings.transitionDelay,scope:this}).run()}}};f.tEffects.Jaw=function(l){var j=l,m=j.settings.direction,k,n=false,o={},i,p,q;return{init:function(){var r=new f.tEffects.Jalousie(l);r.init();o=j.getLinearGridCellSize();k=j.node.boundingBox.find("div.te-overlay");i=k.find("div.te-grid > div");p=k.find("div.te-grid > div.te-odd");q=k.find("div.te-grid > div.te-even");if(!Util.isPropertySupported("transform")){i.css({margin:"0px",width:o.width,height:o.height})}},update:function(s,t){j.attachImageTo("boundingBox",(!n?s:undefined)).attachImageTo(i,(n?s:undefined));var r=m===c?"X":"Y";q.css3("transform","translate"+r+"("+(n?0:"-100")+"%)");p.css3("transform","translate"+r+"("+(n?0:100)+"%)");n=!n;window.setTimeout(t,j.settings.transitionDuration*1000)},updateFallback:function(r,s){f.aQueue.add({startedCallback:function(){var t=0;j.attachImageTo("boundingBox");i.each(function(){var v=f(this).hasClass("te-odd"),u=v?o.width:0-o.width,w=v?o.height:0-o.height;f(this).css({backgroundImage:"url("+j.getImage(r).attr("src")+")",backgroundPosition:(m===c?u+"px "+t+"px":t+"px "+w+"px"),backgroundRepeat:"no-repeat"});t-=(m===c?o.height:o.width)})},iteratedCallback:function(u){var t=m!==c?Math.ceil(u*o.height/j.settings.rows):Math.ceil(u*o.width/j.settings.cols),v=0;i.each(function(){var z=f(this).hasClass("te-odd"),w=z?(o.width-t):(t-o.width),A=z?(o.height-t):(t-o.height);f(this).css({backgroundImage:"url("+j.getImage(r).attr("src")+")",backgroundPosition:(m===c?w+"px "+v+"px":v+"px "+A+"px"),backgroundRepeat:"no-repeat"});v-=(m===c?o.height:o.width)})},completedCallback:s,iterations:(m===c?j.settings.rows:j.settings.cols),delay:j.settings.transitionDelay,scope:this}).run()}}};f.tEffects.Jalousie=function(m){var k=m,l=k.settings.direction,j,i=false,o={},n;return{init:function(){o=k.getLinearGridCellSize();k.attachImageTo("boundingBox");j=k.renderOverlay("LinearGrid");n=j.find("div.te-grid > div");j.find("div.te-grid").css({width:(l===c?k.canvas.width:(o.width*k.settings.cols)+o.width),height:(l===c?(o.height*k.settings.rows)+o.height:k.canvas.height),display:"block"});var p="render"+(Util.isPropertySupported("transform")?"":"Fallback");this[p]()},render:function(){var p=0;n.css({width:o.width,height:o.height}).addClass("te-transition").css3("transition-duration",k.settings.transitionDuration+"s").each(function(){f(this).css({backgroundImage:"url("+k.getImage().attr("src")+")",backgroundPosition:(l===c?("0px "+p+"px"):(p+"px 0px")),backgroundRepeat:"no-repeat"});p-=(l===c?o.height:o.width)})},renderFallback:function(){n.css(l===c?{"margin-top":o.height+"px",width:k.canvas.width,height:"0px"}:{"margin-left":o.width+"px",width:"0px",height:k.canvas.height})},update:function(p,q){k.attachImageTo("boundingBox",(!i?p:undefined)).attachImageTo(n,(i?p:undefined));if(l===c){n.css3("transform","scaleY("+(i?1:0)+")")}else{n.css3("transform","scaleX("+(i?1:0)+")")}i=!i;window.setTimeout(q,k.settings.transitionDuration*1000)},updateFallback:function(p,q){f.aQueue.add({startedCallback:function(){var r=0;k.attachImageTo("boundingBox");n.each(function(){f(this).css({backgroundImage:"url("+k.getImage(p).attr("src")+")",backgroundPosition:(l===c?"0px "+r+"px":r+"px 0px"),backgroundRepeat:"no-repeat"});r-=(l===c?o.height:o.width)})},iteratedCallback:function(s){var r=l===c?Math.ceil(s*o.height/k.settings.rows):Math.ceil(s*o.width/k.settings.cols);n.each(function(){f(this).css(l===c?{height:(r)+"px",margin:(o.height-r)+"px 0px 0px 0px"}:{width:(r)+"px",margin:"0px 0px 0px "+(o.width-r)+"px"})})},completedCallback:q,iterations:(l===c?k.settings.rows:k.settings.cols),delay:k.settings.transitionDelay,scope:this}).run()}}};f.tEffects.RandomCells=function(i){i.settings.method="random";return f.tEffects.DiagonalCells(i)};f.tEffects.DiagonalCells=function(l){var k=l,p,o,m=k.settings.dimension,n=[],j,i=false;return{init:function(){p={width:Math.ceil(k.canvas.width/m),height:Math.ceil(k.canvas.height/m)};k.settings.direction=null;k.attachImageTo("boundingBox");j=k.renderOverlay("CrossedGrid");o=j.find("div.te-grid > div");o.css({width:p.width,height:p.height,display:"inline-block"});j.find("div.te-grid").css({width:p.width*m,height:p.height*m,display:"block"});var q="render"+(Util.isPropertySupported("transform")?"":"Fallback");this[q]()},render:function(){var q,s=0;o.addClass("te-transition").css3({"transition-duration":k.settings.transitionDuration+"s","transition-property":"opacity",opacity:"1.0"}).css({backgroundImage:"url("+k.getImage().attr("src")+")",backgroundRepeat:"no-repeat"});for(var t=0;t<m;t++){for(var u=0;u<m;u++){if(k.settings.method===a){q=Math.max(u,t)*(k.settings.transitionDelay*2)}else{q=Math.floor(Math.random()*m*k.settings.transitionDelay)}f(o[s++]).css("backgroundPosition","-"+(u*p.width)+"px -"+(t*p.height)+"px").css3("transition-delay",q+"ms")}}},renderFallback:function(){var t,q=0;o.css({backgroundImage:"url("+k.getImage().attr("src")+")",backgroundRepeat:"no-repeat",visibility:"hidden"});for(var s=0;s<m;s++){for(var u=0;u<m;u++){if(k.settings.method===a){t=Math.max(u,s)}else{t=Math.floor(Math.random()*m)}n[q]=t;f(o[q++]).css("backgroundPosition","-"+(u*p.width)+"px -"+(s*p.height)+"px")}}},update:function(q,r){k.attachImageTo("boundingBox",(!i?q:undefined)).attachImageTo(o,(i?q:undefined));o.css3("opacity",i?"1.0":"0");i=!i;window.setTimeout(r,k.settings.transitionDuration*1000)},updateFallback:function(q,r){f.aQueue.add({startedCallback:function(){k.attachImageTo("boundingBox");o.each(function(){f(this).css({backgroundImage:"url("+k.getImage(q).attr("src")+")",visibility:"hidden"})})},iteratedCallback:function(s){o.each(function(t){if(n[t]==(s-1)){f(this).css("visibility","visible")}})},completedCallback:r,iterations:k.settings.dimension,delay:(k.settings.transitionDelay),scope:this}).run()}}}})(jQuery);(function(a){var b=function(f){var j='<div class="bss-mask"></div>',c='<div class="bss-image-cache"></div>',i='<div class="bss-overlay"><div class="bss-anchor"><div class="bss-boundingBox"></div><div class="bss-left prev"></div><div class="bss-right next"></div><div class="bss-caption"></div></div><div class="bss-toolbar"><button class="close"></button><button class="prev"></button><button class="next"></button></div></div>',g='<button class="item"></button>',d=[],h=f,e=null,k={mask:null,overlay:null,boundingBox:null,caption:null,next:null,prev:null,close:null,items:[]};return{init:function(l){if(!l.length){throw"Images not specified"}this.prefetchImages(l);this.syncUI(l)},set:function(l){h=l},prefetchImages:function(m){var l,n=a(c).appendTo("body");m.each(function(o,p){l=new Image();l.src=p.href+"?v="+(new Date()).getTime();l.title=p.title;a(this).data("index",o);a(l).appendTo(n)});d=n.find("img")},syncUI:function(l){l.unbind("click.bss").bind("click.bss",this,function(m){m.preventDefault();m.data.showUI(a(this).data("index"))})},adjustByImage:function(l){var m=a(d[l]);if(m.attr("title").length){k.caption.html(m.attr("title")).show()}else{k.caption.hide()}k.overlay.css({width:m.width(),height:m.height()+36});k.overlay.css({top:(a(window).height()-m.height())/2,left:(a(window).width()-m.width())/2,visibility:"visible"})},initEffectLibrary:function(l){e=a.tEffects({boundingBox:k.boundingBox,images:d,effect:h.effect,method:h.method,direction:h.direction,transitionDuration:h.transitionDuration,transitionDelay:h.transitionDelay,initalIndex:l,triggerNext:{node:k.next,event:"click"},triggerPrev:{node:k.prev,event:"click"},controls:{template:g,appendTo:k.overlay.find("div.bss-toolbar")}});e.enable();a(document).bind("start-transition.t-effect",this,function(n,m){n.data.adjustByImage(m)})},showUI:function(l){k.mask=a(j).appendTo("body");k.overlay=a(i).appendTo("body");k.boundingBox=k.overlay.find("div.bss-boundingBox");k.next=k.overlay.find(".next");k.prev=k.overlay.find(".prev");k.close=k.overlay.find("button.close");k.caption=k.overlay.find("div.bss-caption");this.initEffectLibrary(l);this.adjustByImage(l);k.mask.css("visibility","visible");k.overlay.css("visibility","visible");k.close.bind("click.bss",this,this.hideUI);k.mask.bind("click.bss",this,this.hideUI);a(document).bind("keydown",this,function(m){if(m.which===27){m.data.hideUI()}})},hideUI:function(){e.disable();delete e;if(k.overlay.length){k.overlay.remove()}if(k.mask.length){k.mask.remove()}}}};a.fn.bsShow=function(c){var d=new b(c);d.init(a(this));return d}})(jQuery);
